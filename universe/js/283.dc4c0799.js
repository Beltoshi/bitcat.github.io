"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[283],{283:function(e,a,t){t.r(a),t.d(a,{default:function(){return K}});var l=t(3396),n=t(4870),o=t(7139);const u=e=>((0,l.dD)("data-v-12591c45"),e=e(),(0,l.Cn)(),e),s={class:"arena-game-field"},v={class:"game-status"},i={class:"player-info"},r={class:"hp-bar"},c=u((()=>(0,l._)("span",null,"You",-1))),d={class:"timer"},y={class:"player-info opponent"},p={class:"hp-bar"},x=u((()=>(0,l._)("span",null,"Bot",-1))),m=.8,h=15,f=50,_=10;var M={__name:"ArenaGameField",setup(e,{expose:a}){const t=(0,n.iH)({x:50,y:0}),u=(0,n.iH)({x:300,y:0}),M=(0,n.iH)(100),w=(0,n.iH)(100),k=(0,n.iH)(120),b=(0,n.iH)([{id:1,x:0,y:0,width:600},{id:2,x:100,y:100,width:200},{id:3,x:400,y:150,width:150}]),g=(0,n.iH)({x:0,y:0}),H=(0,n.iH)(!1),j=(0,n.iH)(null),D=e=>{const a=Math.floor(e/60),t=e%60;return`${a}:${t.toString().padStart(2,"0")}`},P=()=>{g.value.y-=m,t.value.y+=g.value.y;for(const e of b.value)if(t.value.y<=e.y&&t.value.y+g.value.y>e.y&&t.value.x>=e.x&&t.value.x<=e.x+e.width){t.value.y=e.y,g.value.y=0,H.value=!1;break}t.value.y<0&&(t.value.y=0,g.value.y=0,H.value=!1)};let T;const A=()=>{k.value>0&&(P(),$()),T=requestAnimationFrame(A)};let C;(0,l.bv)((()=>{A(),C=setInterval((()=>{k.value>0&&k.value--}),1e3)})),(0,l.Ah)((()=>{T&&cancelAnimationFrame(T),C&&clearInterval(C)}));const F=()=>{H.value||(g.value.y=h,H.value=!0)},I=()=>{const e=Math.abs(t.value.x-u.value.x);e<=f&&(w.value=Math.max(0,w.value-_))},$=()=>{const e=u.value.x<t.value.x?2:-2;u.value.x+=e;const a=Math.abs(u.value.x-t.value.x);a<=f&&(M.value=Math.max(0,M.value-1))};return a({playerPosition:(0,n.OT)(t),updatePlayerPosition:e=>{t.value.x=Math.max(20,Math.min(e,580))},jumpPlayer:F,attackPlayer:I}),(e,a)=>((0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",v,[(0,l._)("div",i,[(0,l._)("div",r,[(0,l._)("div",{style:(0,o.j5)({width:M.value+"%"}),class:"hp-fill"},null,4)]),c]),(0,l._)("div",d,(0,o.zw)(D(k.value)),1),(0,l._)("div",y,[(0,l._)("div",p,[(0,l._)("div",{style:(0,o.j5)({width:w.value+"%"}),class:"hp-fill"},null,4)]),x])]),(0,l._)("div",{class:"game-field",ref_key:"gameField",ref:j},[(0,l._)("div",{class:"player",style:(0,o.j5)({left:t.value.x+"px",bottom:t.value.y+"px"})}," ðŸ˜º ",4),(0,l._)("div",{class:"player bot",style:(0,o.j5)({left:u.value.x+"px",bottom:u.value.y+"px"})}," ðŸ¤– ",4),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.value,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"platform",style:(0,o.j5)({left:e.x+"px",bottom:e.y+"px",width:e.width+"px"})},null,4)))),128))],512)]))}},w=t(89);const k=(0,w.Z)(M,[["__scopeId","data-v-12591c45"]]);var b=k,g=t(3862);const H={class:"arena-controls"},j={class:"movement-controls"},D={class:"action-controls"},P=["onTouchstart","onMousedown"],T=["onTouchstart","onMousedown"],A=50;var C={__name:"ArenaControls",emits:["move","jump","attack"],setup(e,{emit:a}){const t=(0,n.iH)(null),u=(0,n.iH)(null),s=(0,n.iH)({x:0,y:0}),v=(0,n.iH)(!1),i=(0,l.Fl)((()=>({transform:`translate(${s.value.x}px, ${s.value.y}px)`}))),r=e=>{const a=e.touches?e.touches[0]:e,l=t.value.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top}},c=e=>{e.preventDefault(),v.value=!0,p(e)},d=e=>{v.value&&(e.preventDefault(),p(e))},y=e=>{e.preventDefault(),v.value=!1,s.value={x:0,y:0},a("move",{x:0,y:0})},p=e=>{const l=r(e),n=t.value,o=n.offsetWidth/2,u=n.offsetHeight/2;let v=l.x-o,i=l.y-u;const c=Math.sqrt(v*v+i*i);if(c>A){const e=Math.atan2(i,v);v=Math.cos(e)*A,i=Math.sin(e)*A}s.value={x:v,y:i},a("move",{x:v/A,y:-i/A})},x=e=>{e.preventDefault(),a("jump")},m=e=>{e.preventDefault(),a("attack")};return(e,a)=>((0,l.wg)(),(0,l.iD)("div",H,[(0,l._)("div",j,[(0,l._)("div",{ref_key:"joystickContainer",ref:t,class:"joystick-container",onTouchstart:c,onTouchmove:d,onTouchend:y,onMousedown:c,onMousemove:d,onMouseup:y,onMouseleave:y},[(0,l._)("div",{ref_key:"joystick",ref:u,class:"joystick",style:(0,o.j5)(i.value)},null,4)],544)]),(0,l._)("div",D,[(0,l._)("button",{class:"action-button jump",onTouchstart:(0,g.iM)(x,["prevent"]),onMousedown:(0,g.iM)(x,["prevent"])}," JUMP ",40,P),(0,l._)("button",{class:"action-button attack",onTouchstart:(0,g.iM)(m,["prevent"]),onMousedown:(0,g.iM)(m,["prevent"])}," ATTACK ",40,T)])]))}};const F=(0,w.Z)(C,[["__scopeId","data-v-30be4129"]]);var I=F;const $=e=>((0,l.dD)("data-v-135dd082"),e=e(),(0,l.Cn)(),e),B={class:"arena-page"},W=$((()=>(0,l._)("h1",null,"BITCAT Arena",-1))),Y={class:"game-container"},Z=5;var q={__name:"ArenaPage",setup(e){const a=(0,n.iH)(null),t=({x:e,y:t})=>{if(!a.value)return;const l=a.value.playerPosition,n=l.x+e*Z,o=Math.max(20,Math.min(n,580));a.value.updatePlayerPosition(o,l.y)},o=()=>{a.value&&a.value.jumpPlayer()},u=()=>{a.value&&a.value.attackPlayer()};return(e,n)=>((0,l.wg)(),(0,l.iD)("div",B,[W,(0,l._)("div",Y,[(0,l.Wm)(b,{ref_key:"gameField",ref:a},null,512)]),(0,l.Wm)(I,{onMove:t,onJump:o,onAttack:u})]))}};const J=(0,w.Z)(q,[["__scopeId","data-v-135dd082"]]);var K=J}}]);
//# sourceMappingURL=283.dc4c0799.js.map